---
author: 'Lanxinmob'
title: 'nonebot高德插件开发'
postSlug: 'anzhuangshellcalsh'
featured: false
draft: false
tags:
  - '开发记录'
  - 'nonebot'
ogImage: ''
description: ''
pubDatetime: 2025-09-29T09:00:00Z
toc: true
---

## 高德插件开发

- 主要思路：借助官方API，使用它的 “Web服务API”获取数据，使用大模型理解意图，分析数据，提供建议。

#### 实现功能

- 关键字搜索：比如搜索“北京大学附近的烤鸭”。
- 周边搜索：根据一个经纬度，搜索“周围1000米内的所有火锅店”。

#### 数据局限性：
- 能获取的数据：店名、地址、经纬度、联系电话、分类、整体评分（比如4.8分）。

- 无法直接获取的数据：详细的顾客评价、推荐菜列表、菜品图片。这些深度信息高德API是不提供的。


#### 插件核心逻辑：
##### 触发高德插件

- 用户发送指令，如“/今天吃什么 附近”。

- Bot引导用户发送地理位置（QQ可以发送位置），或者输入一个地点名（如“中关村”）。
##### 调用高德API获取数据
- 如果用户发的是地点名，先用“地理编码API”把“中关村”转成经纬度。
- 使用“周边搜索API”，设置搜索分类为“美食”，传入经纬度和半径，获取附近的餐厅列表。
##### 智能推荐与展示
- 把API返回的众多餐厅提供给大模型，大模型通过多角度分析向用户回复推荐信息。
##### 解决“详细信息”问题
- 既然API拿不到评价和推荐菜，那就把用户引导到能看到这些信息的地方。
- 高德API的返回结果里通常会包含这个POI在高德地图里的ID。你可以拼接一个高德地图的详情页URL，或者一个大众点评的搜索URL。

#### 最终效果
用户：/今天吃什么
Bot (茉子)：先把你的位置发给我，或者告诉我你在哪个地方呀~ (^·^)
用户：(发送位置)
Bot (茉子)：哼哼~ 本茉子大人为你侦察到了一个好地方！
【海底捞火锅 (中关村店)】
评分：★★★★☆ 4.7分
地址：北京市海淀区xx路xx号
想看看大家都推荐点什么菜，或者具体评价的话，可以点下面的链接哦~
https://dianping.com/search/